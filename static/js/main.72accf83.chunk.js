(this["webpackJsonpproto-dashboard"]=this["webpackJsonpproto-dashboard"]||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),l=n.n(c),o=(n(14),n(1)),u=n(6),s=n.n(u),i=n(2),f=n.n(i),d=n(4),b=n(3);function m(e){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(17);var v=function(e){var t=e.networkStatic,n=e.numUsers,a=e.numTransfers;return r.a.createElement("div",null,r.a.createElement("div",{className:"title"},t.name," (",t.abbreviation,")"),r.a.createElement("div",{className:"subtitle"},n," Users, ",a," Transfers"))};var p=function(e){var t=e.timestamp,n=Object(a.useState)(""),c=Object(o.a)(n,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){function e(){u(s()(t).fromNow())}e();var n=setInterval(e,1e3);return function(){return clearInterval(n)}}),[t]),t&&r.a.createElement("span",null,s()(t).format("hh:mm:ss"),"(",l,")")},h=n(21),x=!1,C=null,y=null;function B(e,t,n,a){if(0!==e.length){var r=e.links.map((function(e){return Object.create(e)})),c=e.nodes.map((function(e){return Object.create(e)})),l=h.forceSimulation(c).force("link",h.forceLink(r).id((function(e){return e.id})).distance((function(e){return 60}))).force("charge",h.forceManyBody()).force("x",h.forceX()).force("y",h.forceY());h.select("svg").remove();var o=h.select("#svgContainer").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[-512,-512,1024,1024]).call(h.zoom().on("zoom",(function(e){o.attr("transform",e.transform)}))).append("g"),u=o.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(r).join("line").attr("stroke-width",2),s=o.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(c).join("circle").attr("r",5).attr("fill","#69b3b2").call(function(e){return h.drag().on("start",(function(t,n){x=!0,t.active||e.alphaTarget(.3).restart(),n.fx=n.x,n.fy=n.y})).on("drag",(function(e,t){t.fx=e.x,t.fy=e.y})).on("end",(function(t,n){x=!1,t.active||e.alphaTarget(0),n.fx=null,n.fy=null}))}(l));return s.on("click",(function(t,n){C=e.nodes[n.index].id,s.style("fill",(function(e){return e.id===C?"red":"#b8b8b8"})),a(C)})),s.on("mouseover",(function(e,t){if(x)return!1;s.style("fill",(function(e){return null===C?"#B8B8B8":e.id===C?"red":"#B8B8B8"})),h.select(this).style("fill","#69b3b2"),u.style("stroke",(function(e){return console.log("stroke",e),e.__proto__.source===t.id||e.__proto__.target===t.id?"#69b3b2":"#b8b8b8"})).style("stroke-width",(function(e){return e.source===t.id||e.target===t.id?2:1}))})).on("mouseout",(function(e,t){if(x)return!1;s.style("fill",(function(e){return null===C?"#69b3b2":e.id===C?"red":"#69b3b2"})),u.style("stroke",(function(e){return y===e.id?"red":"black"})).style("stroke-width","1")})),u.on("click",(function(a,r){var c=e.links[r.index];y=c.id;var l={network:t,from:c.source,to:c.target};u.style("stroke",(function(e){return y===e.id?"red":"black"})),n(l)})),s.append("title").text((function(e){return e.id})),l.on("tick",(function(){u.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),s.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y}))})),o.node()}}function k(e,t){for(var n={},a=0,r=Object.values(t);a<r.length;a++){n[r[a]]=[]}var c=!0,l=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(c=(u=s.next()).done);c=!0){var i=u.value;t[i.type]&&n[t[i.type]].push(i)}}catch(f){l=!0,o=f}finally{try{c||null==s.return||s.return()}finally{if(l)throw o}}return n}function A(e){var t=new Set,n={},a=!0,r=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){for(var u=l.value,s=[u.from,u.to],i=0,f=s;i<f.length;i++){var d=f[i];t.add(d)}var b=s[0],m=s[1];if(m<b){var E=[m,b];b=E[0],m=E[1]}n[[b,m]]={id:b+m,source:b,target:m}}}catch(j){r=!0,c=j}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}var v=[],p=[],h=!0,x=!1,C=void 0;try{for(var y,B=t[Symbol.iterator]();!(h=(y=B.next()).done);h=!0){var k=y.value;v.push({id:k,label:k.slice(0,7)})}}catch(j){x=!0,C=j}finally{try{h||null==B.return||B.return()}finally{if(x)throw C}}for(var A=0,w=Object.values(n);A<w.length;A++){var D=w[A];p.push(D)}return[v,p]}var w=function(e){var t=e.network,n=e.onSelectTrustline,c=e.onSelectAccount,l=Object(a.useState)(0),u=Object(o.a)(l,2),s=u[0],i=u[1],E=Object(a.useState)({links:[],nodes:[]}),h=Object(o.a)(E,2),x=h[0],C=h[1],y=Object(a.useState)(null),w=Object(o.a)(y,2),D=w[0],j=w[1],O=Object(a.useState)(null),g=Object(o.a)(O,2),F=g[0],S=g[1],N=Object(a.useState)(null),T=Object(o.a)(N,2),U=T[0],_=T[1];function I(){var e={links:[],nodes:[]};i(0),j(0),S(0);var n=!0;!function(){var a=0;function r(){return(r=Object(b.a)(f.a.mark((function r(){var c,l,u,s,b,E,v;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=3;break}return console.log("Skip fetching, because old still in progress"),r.abrupt("return");case 3:return n=!1,console.log("Fetch events from block ",a),r.next=7,m("https://tlbc.relay.anyblock.tools"+"/api/v1/networks/".concat(t.address,"/events?fromBlock=").concat(a));case 7:if(0!==(c=r.sent).length){r.next=13;break}return console.log("No new events"),_(Date.now()),n=!0,r.abrupt("return");case 13:l=k(c,{TrustlineUpdate:"trustlineUpdateEvents",Transfer:"transferEvents"}),u=A(l.trustlineUpdateEvents),s=Object(o.a)(u,2),b=s[0],E=s[1],v={links:[].concat(Object(d.a)(e.links),Object(d.a)(E)),nodes:[].concat(Object(d.a)(e.nodes),Object(d.a)(b))},e=v,n=!0,C(v),j((function(e){return e+l.transferEvents.length})),S(e.nodes.length),_(Date.now()),a=c[c.length-1].blockNumber+1,i(100);case 24:case"end":return r.stop()}}),r)})))).apply(this,arguments)}(function(){r.apply(this,arguments)})()}()}return Object(a.useEffect)(I,[t]),Object(a.useEffect)((function(){B(x,t.address,n,c)}),[x,t,n,c]),r.a.createElement("div",{style:{height:"90%"}},r.a.createElement("div",{style:{minHeight:"100px"}},100!==s?"Loading...":r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{networkStatic:t,numUsers:F,numTransfers:D}),"last updated: ",r.a.createElement(p,{timestamp:U})," ",r.a.createElement("a",{onClick:function(){return I()}},"Click here to update."))),r.a.createElement("div",{style:{width:"100%",height:"100%"},id:"svgContainer"}))},D=(n(18),["0x12657128d7fa4291647eC3b0147E5fA6EebD388A","0xF2320a5371DA3CB967B9355597AA7adEc17E4220","0x18BDC736b23Ff7294BED9fa988a1443357C7B0ed","0x0A6f0C541Be542c098B7Ee03C9C634f20BCf8422","0x01564a4b7C327c84763D7fCf629B02584AE72973","0x8B2c0e43F69a8a25c94510cC85138260bb24e381","0x7A6049b3A96E7a6D68e6e6813a19594Ea336d080","0xB57C960Ee760cDa8184C9C9d9b7D0FeBE4557616","0x8306e229ea6Edf3aD2670681912CcC0C338f7963","0x70d4db4eC56b398D7cbA3666835490cb0e39f008","0x049D814ED22bEA4394aC2Ec48bace8A1e31BC376","0xc3790A6df080381ebf3eF9BeB35e6b70431bB420","0xa81DE4DA252E012a5e8b0Fe1FE91BB0a55Dc5f9d","0xB365694dB0961Fe81cA5e296c1250d24a4Ee627f","0x1A64Bd5e956DA93E912CB7eb9b00B8D2Bc9015F9","0x714dabD79B7962dA47c8fEA446064523CE0456fE","0xC0f1030d83AEEF1616deef060114E31B3A25De81","0x15933718E2e3478e756C13d516f7f4f4F749b3D6","0x77626459240b8105DeC70dC97D61441924f166Df","0x264B1775Ce5d2831608575974CfB9EB9F8F659f5","0xb2B3A0E958e3eEb333b734ABF34ACA2dB5b94B8F","0xA31fA3D8DaEBc1d7fb91a6F5F6805873dC958Ff2","0x603f22B1D3854b985E0a61Ce4c0349534a0e5673","0x5F74eD72158566c05328Eb815544461bD0b45116","0x7Ac3fC1C428df99D81d9b644106FF67c44A155aA","0xef5bC01da9AC8B32F78dC847D84454E48510Ef72","0x97668E07c122f7701b804A4eA6fd196F1e264423","0x57c4a2cCF2CC99f3dF7855465d1528C110Ff4F14","0xa809D5e740AA324FF94751836b1d7Aa6BA2de81E","0xF455c46823Cdb5A899217A0f085525874bA194A8","0xc8a0a3aA3A98F27198De126379386D8aA7D01950","0xCaa5B04e6E44EC3106EEBdAAd7D6C7bE9370Be32","0x2421A2ea7B24b5D26177B78afcf8F4B40255324d","0x2aB3f469D041aE68F45b3C255B7CB46370FfffF5","0x03FE2A6a589e33b7d3cD8208705092BE572A76d1","0xFe54Cbb23414467CcC052dACA1ecc908745D71Eb","0x4D4dd71A818D4F7d3349F936382ea70979123F81","0xCC6039e0681548002bcF39bf65d444beD65980B0","0x821b770a4b5D1228322B2A2Bb29354b5faabD29F","0x86D50E94e6Ba4B99C5c19439c13a07E5B7c231f9","0x6212C2783B2acCA8468b1befb19a4aAccb3c4970","0x4B1Ce992B04539786DF19dDC416490cd6595DB01","0x8588173E0322089Efe851b14d041aC15AC991C07","0xcb02a08a72Cb459fE41E987065fE1E2D7438E64E","0x0FbD56e384826246dC795C1A1951c781184F8faa"]);var j=function(e){var t=e.onNetworkSelect,n=Object(a.useState)([]),c=Object(o.a)(n,2),l=c[0],u=c[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),d=i[0],E=i[1];Object(a.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("https://tlbc.relay.anyblock.tools/api/v1/networks");case 2:(t=(t=e.sent).filter((function(e){return!D.includes(e.address)}))).sort((function(e,t){return t.numUsers-e.numUsers})),u(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e();var n=setInterval(e,1e4);return function(){return clearInterval(n)}}),[]);var v=Object(a.useCallback)((function(e){E(e.address),t(e)}),[t,E]);return r.a.createElement("aside",{className:"menu my-menu"},r.a.createElement("p",{className:"menu-label"},"Networks"),r.a.createElement("ul",null,l.map((function(e){return r.a.createElement("li",{key:e.address},r.a.createElement("a",{onClick:function(){return v(e)},className:"list-item "+(d===e.address?"is-active":"")},e.name," (",e.numUsers,")"))}))))},O=n(5),g=n.n(O);function F(e,t){var n=new g.a(e).div(new g.a(10).pow(t.decimals));return"".concat(n," ").concat(t.abbreviation)}var S=function(e){var t=e.network,n=e.from,c=e.to,l=Object(a.useState)({}),u=Object(o.a)(l,2),s=u[0],i=u[1];return Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("https://tlbc.relay.anyblock.tools"+"/api/v1/networks/".concat(t.address,"/users/").concat(n,"/trustlines/").concat(c));case 2:a=e.sent,i(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n,c]),r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"Trustline Details"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"from"),r.a.createElement("td",null,s.user)),r.a.createElement("tr",null,r.a.createElement("th",null,"to"),r.a.createElement("td",null,s.counterParty)),r.a.createElement("tr",null,r.a.createElement("th",null,"Credit given"),r.a.createElement("td",null,F(s.given,t))),r.a.createElement("tr",null,r.a.createElement("th",null,"Credit received"),r.a.createElement("td",null,F(s.received,t))),r.a.createElement("tr",null,r.a.createElement("th",null,"Balance"),r.a.createElement("td",null,F(s.balance,t))))))};function N(e,t){if(null==e)return"...";var n=new g.a(e).div(new g.a(10).pow(t.decimals));return"".concat(n," ").concat(t.abbreviation)}var T=function(e){var t=e.network,n=e.address,c=Object(a.useState)({}),l=Object(o.a)(c,2),u=l[0],s=l[1];return Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("https://tlbc.relay.anyblock.tools"+"/api/v1/networks/".concat(t.address,"/users/").concat(n));case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n]),r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"Account Details"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"User"),r.a.createElement("td",null,n)),r.a.createElement("tr",null,r.a.createElement("th",null,"Credit given"),r.a.createElement("td",null,N(u.given,t))),r.a.createElement("tr",null,r.a.createElement("th",null,"Credit received"),r.a.createElement("td",null,N(u.received,t))),r.a.createElement("tr",null,r.a.createElement("th",null,"Balance"),r.a.createElement("td",null,N(u.balance,t))),r.a.createElement("tr",null,r.a.createElement("th",null,"Available"),r.a.createElement("td",null,N(u.leftReceived,t))))))};n(19),n(20);s.a.relativeTimeThreshold("ss",10);var U=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(null),u=Object(o.a)(l,2),s=u[0],i=u[1],f=Object(a.useState)(null),d=Object(o.a)(f,2),b=d[0],m=d[1],E=Object(a.useCallback)((function(e){i(null),m(null),c(e)}),[]);return r.a.createElement("div",{className:"mycontainer columns"},r.a.createElement("div",{className:"column is-narrow"},r.a.createElement(j,{onNetworkSelect:E})),r.a.createElement("div",{className:"column is-three-quarter"},n?r.a.createElement(w,{network:n,onSelectTrustline:i,onSelectAccount:m}):r.a.createElement("div",{className:"has-text-centered"},"Select a network")),r.a.createElement("div",{className:"column is-one-quarter"},s?r.a.createElement(S,{network:n,from:s.from,to:s.to}):r.a.createElement("div",{className:"has-text-centered"},"Select a trustline"),r.a.createElement("br",null),r.a.createElement("br",null),b?r.a.createElement(T,{network:n,address:b}):r.a.createElement("div",{className:"has-text-centered"},"Select an account")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,n){e.exports=n(22)}},[[9,1,2]]]);
//# sourceMappingURL=main.72accf83.chunk.js.map